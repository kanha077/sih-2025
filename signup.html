<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Signup</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    form { max-width: 400px; margin: auto; }
    input, textarea { width: 100%; margin: 8px 0; padding: 10px; }
    button { padding: 10px; background: #2d89ef; color: white; border: none; cursor: pointer; }
    button:hover { background: #1d5fa7; }
  </style>
  <script type="module">
    import { supabase } from "./js/supabaseClient.js";

    async function signup(e) {
      e.preventDefault();

      const firstName = document.getElementById("firstName").value;
      const lastName = document.getElementById("lastName").value;
      const dob = document.getElementById("dob").value;
      const phone = document.getElementById("phone").value;
      const address = document.getElementById("address").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      // ✅ Sign up user with email/password
      const { data, error } = await supabase.auth.signUp({
        email,
        password,
        options: {
          data: { 
            first_name: firstName,
            last_name: lastName,
            dob,
            phone,
            address
          }
        }
      });

      if (error) {
        alert("Signup failed: " + error.message);
      } else {
        // ✅ redirect to confirmation page
        window.location.href = "confirmation.html";
      }
    }

    window.signup = signup;
  </script>
</head>
<body>
  <h2>Create Your Account</h2>
  <form onsubmit="signup(event)">
    <input type="text" id="firstName" placeholder="First Name" required>
    <input type="text" id="lastName" placeholder="Last Name" required>
    <input type="date" id="dob" required>
    <input type="tel" id="phone" placeholder="Phone Number" required>
    <textarea id="address" placeholder="Address" required></textarea>
    <input type="email" id="email" placeholder="Email Address" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Sign Up</button>
  </form>
  <p>Already have an account? <a href="login.html">Login</a></p>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Supabase Connection Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>Supabase Connection Test</h1>
    <p>Open the developer console (press F12), then click the button below.</p>
    <button id="testButton">Test Login Attempt</button>
    <div id="result"></div>

    <script>
        // --- IMPORTANT ---
        // Go to your Supabase Dashboard -> Project Settings -> API
        // and copy/paste your URL and anon key here again to be 100% sure they are correct.
        const SUPABASE_URL = 'https://wraemxcqjycuddhfgjtt.supabase.co';
        const SUPABASE_ANON_KEY = 'YOUR_ANON_KEY_HERE'; // <-- PASTE YOUR KEY HERE

        const resultDiv = document.getElementById('result');
        const testButton = document.getElementById('testButton');

        try {
            const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            console.log("Supabase client initialized successfully.");
            resultDiv.innerHTML = "<p style='color:green;'>Supabase client initialized successfully.</p>";

            testButton.addEventListener('click', async () => {
                console.log("Attempting to sign in with dummy credentials...");
                resultDiv.innerHTML = "<p>Attempting to sign in...</p>";

                const { data, error } = await _supabase.auth.signInWithPassword({
                    email: 'test@example.com',
                    password: 'this-is-a-test-password',
                });

                if (error) {
                    console.error("Test failed with an error:", error);
                    resultDiv.innerHTML = `<p style='color:red;'><strong>Test Failed.</strong> See the console for the error message. The error is: ${error.message}</p>`;
                } else {
                    console.log("Test Succeeded! Data received:", data);
                    resultDiv.innerHTML = "<p style='color:green;'><strong>Test Succeeded!</strong> A connection was made. The error 'Invalid login credentials' is EXPECTED and means it worked.</p>";
                }
            });

        } catch (e) {
            console.error("Failed to even initialize the Supabase client.", e);
            resultDiv.innerHTML = `<p style='color:red;'>Failed to initialize the Supabase client. Check if URL/Key are strings. Error: ${e.message}</p>`;
        }
    </script>
</body>
</html>